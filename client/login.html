<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <!-- <script src="https://unpkg.com/axios/dist/axios.min.js"></script> -->
    <script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="js/fbsdk.js" charset="utf-8"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script type="text/javascript">
      $(document).ready(function() {
        if (localStorage.getItem('fbaccesstoken') != null || localStorage.getItem('accesstoken') != null) {
          window.location.href="index.html"
        }

        $('#login-form').on('submit', function(e){
          e.preventDefault();

          $.ajax({
            method: 'post',
            url: 'http://localhost:3000/users/signin',
            data: {
              username: $('#login-form').find('input[name="username"]').val(),
              password: $('#login-form').find('input[name="password"]').val()
            }
          })
          .done(function(data) {
            console.log(data);
            if (data.msg == 'login success') {
              localStorage.setItem('accesstoken', data.data)
              document.location.href="index.html"
            }
            else if (data.msg == 'password incorrect') {
              alert(data.msg)
              document.location.href="index.html"
            }
            else if (data.msg == 'username not found') {
              alert(data.msg)
              document.location.href="index.html"
            }
          })
        });
      });
    </script>

  </head>
  <body>

    <div class="container">

      <div class="row">
        <div class="Absolute-Center is-Responsive">
          <div id="logo-container"></div>
          <div class="col-sm-12 col-md-10 col-md-offset-1">
            <form action="" id="loginForm">
              <div class="form-group input-group">
                <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                <input class="form-control" type="text" name='username' placeholder="username"/>
              </div>
              <div class="form-group input-group">
                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                <input class="form-control" type="password" name='password' placeholder="password"/>
              </div>
              <div class="form-group">
                <button type="button" class="btn btn-def btn-block">Login</button>
              </div>
              <div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="true"></div>
            </form>
          </div>
        </div>
      </div>

    </div>

    <form id="login-form">
      <input type="text" name="username" placeholder="username" required>
      <input type="password" name="password" placeholder="password" required>
      <button type="submit" name="login">login</button>
    </form>
    <br>

    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v2.10&appId=125519858191028";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    or <div class="fb-login-button" data-max-rows="1" data-size="small" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="true"></div>

    <!-- <button id="login-btn" class="btn btn-primary" type="button" onclick="FBLogin()">
      <i class="fa fa-facebook-official"></i> Login With Facebook
    </button> -->

    <br><br>
    Don't have account? <a href="register.html">Register Here</a>

  </body>
</html>
